{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@blomstra/usercard-stats/./src/forum/components/UserStat.tsx","webpack://@blomstra/usercard-stats/./src/forum/extend/extendUserCard.tsx","webpack://@blomstra/usercard-stats/./src/forum/index.ts","webpack://@blomstra/usercard-stats/external root \"flarum.core.compat['common/Component']\"","webpack://@blomstra/usercard-stats/external root \"flarum.core.compat['common/extend']\"","webpack://@blomstra/usercard-stats/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@blomstra/usercard-stats/external root \"flarum.core.compat['common/utils/extract']\"","webpack://@blomstra/usercard-stats/external root \"flarum.core.compat['forum/app']\"","webpack://@blomstra/usercard-stats/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@blomstra/usercard-stats/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@blomstra/usercard-stats/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@blomstra/usercard-stats/webpack/bootstrap","webpack://@blomstra/usercard-stats/webpack/runtime/compat get default export","webpack://@blomstra/usercard-stats/webpack/runtime/define property getters","webpack://@blomstra/usercard-stats/webpack/runtime/hasOwnProperty shorthand","webpack://@blomstra/usercard-stats/webpack/runtime/make namespace object"],"sourcesContent":["import type Mithril from 'mithril';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport extract from 'flarum/common/utils/extract';\nimport icon from 'flarum/common/helpers/icon';\n\nexport interface UserStatAttrs extends ComponentAttrs {\n  icon: string;\n  displayText: string;\n}\n\nexport default class UserStat<T extends UserStatAttrs = UserStatAttrs> extends Component<T> {\n  view(vnode: Mithril.Vnode) {\n    const attrs = Object.assign({}, this.attrs);\n\n    const iconClass = extract(attrs, 'icon');\n    const displayText = extract(attrs, 'displayText');\n\n    return (\n      <div className=\"userStat\">\n        {icon(iconClass)}\n        {displayText}\n      </div>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\nimport UserStat from '../components/UserStat';\n\nexport default function extendUserCard() {\n  extend(UserCard.prototype, 'infoItems', function (items: ItemList<Mithril.Children>) {\n    // Only required until https://github.com/flarum/framework/pull/3436\n    // Remove 1.4\n    if (items.has('lastSeen')) items.setPriority('lastSeen', 100);\n    if (items.has('joined')) items.setPriority('joined', 90);\n\n    // Required until the relevant extensions are updated to set priorities\n    // fof/gamification\n    if (items.has('points')) items.setPriority('points', 50);\n    // fof/best-answer\n    if (items.has('best-answer-count')) items.setPriority('best-answer-count', 55);\n\n    const user = this.attrs.user;\n\n    items.add(\n      'discussion-count',\n      <UserStat\n        icon=\"fas fa-comment\"\n        displayText={app.translator.trans('blomstra-usercard-stats.forum.user.discussion-count', { count: user.discussionCount() })}\n      />,\n      70\n    );\n\n    items.add(\n      'comment-count',\n      <UserStat\n        icon=\"fas fa-comments\"\n        displayText={app.translator.trans('blomstra-usercard-stats.forum.user.post-count', { count: user.commentCount() })}\n      />,\n      65\n    );\n  });\n}\n","import app from 'flarum/forum/app';\nimport extendUserCard from './extend/extendUserCard';\n\napp.initializers.add('blomstra/usercard-stats', () => {\n  extendUserCard();\n});\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/utils/extract'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/UserCard'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["Component","extract","icon","UserStat","view","vnode","attrs","Object","assign","iconClass","displayText","app","extend","UserCard","extendUserCard","prototype","items","has","setPriority","user","add","translator","trans","count","discussionCount","commentCount","initializers","setPrototypeOf","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","__proto__"],"sourceRoot":""}